<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.ez.gw.employee.model.EmployeeDAO">
	<select id="selectByEmpNo" parameterType="int" resultType="employeeVo">
		select * from employee
		where emp_no=#{empNo}
	</select>
	
	<select id="selectAllEmp" resultType="employeeVo">
		select * from employee
	</select>
	
	<select id="selectPwd" resultType="string" parameterType="int">
		select pwd from employee 
		where emp_no=#{empNo}
	</select>
	
	<select id="selctAuthority" parameterType="int" resultType="string">
		select authority from employee
		where emp_no=#{empNo}
	</select>
	
	<insert id="insertEmp" parameterType="employeeVo">
		<selectKey keyProperty="empNo" order="BEFORE" resultType="int">
			select EMPLOYEE_SEQ.nextval from dual
		</selectKey>
		insert into employee(emp_no, name, ename, jumin, email, pwd, extension_no, tel,
			address, hiredate, authority, annual_salary, image, position_no, dept_no)
		values(#{empNo},#{name},#{ename},#{jumin,jdbcType=VARCHAR},
		#{email},#{pwd},#{extensionNo},#{tel},
			#{address},#{hiredate},#{authority},#{annualSalary},#{image},#{positionNo},#{deptNo})
	</insert>
	
	<select id="selectSearchEmp" parameterType="searchVo" resultType="map">
			select * from organizationChartView
		<if test="searchKeyword!=null and searchKeyword!=''">
			where name like '%'|| #{searchKeyword} ||'%'
			or emp_no like '%'|| #{searchKeyword} ||'%'
			or dept_name like '%'|| #{searchKeyword} ||'%'
			or position_name like '%'|| #{searchKeyword} ||'%'
		</if>
			order by dept_name asc, position_name desc
	</select>
</mapper>